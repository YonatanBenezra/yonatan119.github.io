{"layout": "post", "title": "Scraper optional project", "published": "Apr 20, 2021", "author": "yonatanBenezra", "tags": "node, js, javascript, express, mongodb", "timestamp": 1618929034, "location": "express-mongo-scraper.md.json", "content": "# **Scraper**\n*The next project will help us understand some more express and mongo.*\n\nIn this project we will GET and POST all the data of clothing from ZARA.\nHow?\n- Finding Zara's API.\n- create and connect a Database (MongoDB).\n- parse the data we receive from Zara's API.\n- Save the data to our DB.\n___\n\nHow our repo should look:\n- Mongodb\n  - mongodb.connect.js\n- httpRequest.js\n- index.js\n\nPackages you could use:\n- needle\n- mongodb\n- \n___\n**Finding Zara's API**\nThis project you will be mainly on your own, if you are having trouble, don't worry. one of our lessons will be on this project.\nFirst of all, what we need to do is find the API Zara is fetching its data from.\nlets go to Zara.com, open up our inspect tool and start looking.  \nthe first place we should look for is on the network tab.\nif nothing is showing, refresh the page by clicking Ctrl+Shift+r(hard refresh).\nwe can see here alot of images and all kinds of requests. travel around the site and find the api for fetching clothes!\n*hint: the site fetches only what is needed so try looking on pages with clothes*.\nIf you think you found it, send a GET request on Postman to see if you get back an object with clothes.\nDid you find it? amazing!\nlets open a Database!\n___\n**create and connect a Database (MongoDB)**\nYou know how to do this!\nwe did it together on the project \"Express-mongoDB\".  \nif your being lazy, just go back to the lesson or use the database you created there.\n___\n**parse the data we receive from Zara's API.**\nhttps://www.npmjs.com/package/needle.\nUse this.\n___\n**Save the data to our DB.**\nUse collectionName.insertMany(result...)\n\nThis is not an easy project so don't feel bad if it doesn't work easily.\nIf you need help, send a message.\n* **Good Luck**\n*There is a hint down here if you need one*\n\n\n\n```javascript\n//index.js\n\nconst needle = require(\"needle\");\nconst mongodb = require(\"./mongodb/mongodb.connect\")\n\nconst options = {\n    header: {\n        \"User-Agent\":\n            \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.104 Safari/537.36\"\n    }\n}\n\nasync function main() {\n    const mongoClient = await mongodb();\n    const zaraDB = mongoClient.db(\"zara\");\n        const menAccessories = zaraDB.collection(\"men-accessories\");\n\nconst result = await needle(\n        \"get\",\n        `https://www.zara.com/il/he/man-accessories-l537.html?v1=1720496&ajax=true`,\n        options\n    );\n    await menAccessories.insertMany(resultA.body.productGroups[0].elements)\n}\n```"}